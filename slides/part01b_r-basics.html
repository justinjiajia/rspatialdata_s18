<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Week 1: R Basics" />
  <meta name="copyright" content="<span class='footer-right'><a href='acknowledgements.html'>Acknowledgements</a></span> <span class='footer-right'><a href='../index.html'>Course Homepage</a></span> <span class='footer-right'>Etherpad: <a href='https://is.gd/rspatial_baygeo_s18'>https://is.gd/rspatial_baygeo_s18</a></span> <span class='footer-subtitle'>Spatial Data Analysis in R: Week 1</span>"/>
  <meta name="font-size-adjustment" content="2"/>
  <title>Spatial Data Analysis with R</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACkUlEQVQ4jX2SW0jTcRTHTzNyeZlh6lqmm3POdNPC6SxSEzaqafkykOFoIxTDWpKRFV6iQMNLFyMSsQvUW0WORc2WWBmGKEGZXUyz0NrmNmfa1PYgfHsQ1v5oHjgvX875/M45vy/R8mDJ9caxrFIL5CUWJB00Q9n+7Q+l1BetUMuMTL3JpTB0QVnejd1Hu9DQ60G5eQbqB7PIvj0L2bUZ0KZzghWbs0o7Fx3Tc/B6vStm6+g0wrQvIKh2gKKyUxnNSZoO685SC1YDeL1e9Ll+Ia7WCd5pJ4hojQ8g1nViezETYBqZx93BOdwa9jAgsdUT4J6ZQqC6f4GIiLYU9/RzNWYIdU9hd/8rLjN7UGT8DbWROVVMlQsBBWas142DiIikdfbFMF0POIVm2NzM1zwLS+mvcSsnEajpBSv/8RIgucGJ1EYXEs+NwjrlWfUGMee/Y2PFJIJLrFibex8kOsahhCYnUlpnIL1kh9X9/yMKG2yIOOlAsPYnAveZsE75EEQUQLwTwy5Rsxvx9UxApKEPEYY+BiSizA623oaggkdgq4xLKwRLq7i8sy6EFlpg8wNEVwyAd3wAbZ8cPu3CazeCC/sRojYjaL8Jvm8MPWLDBm03A8CveQ9+7RBia4cYU4QfeokwzTOwc6/4OzKXHap/C5ufD0RNo0i4OAZR81dcnnD69Mp3PxBe9GRkuZdFKk7sqTcQ132EpGUMydetSLnpgOSGHVtbxpHU9AX8mkFEG55/ZrjQL1h82V6esPLVh8Sr40i940J6xzzS7s1C0m6HqHEEiTnatgT5gcPijHxltFwhjpRIQpZjBAJ2lFTBFW5TiOPT8mXx6apdcRl5OaJM1Q6hLC9ls3RPTLgok0NELCKiv02kPqt/O1MZAAAAAElFTkSuQmCC" rel="icon" type="image/x-icon" />
  <script language="javascript" type="text/javascript">
  function TriShowHide(shID) {
    shIDspan = shID + "span";
    shIDdiv = shID + "div";
    if (document.getElementById(shIDdiv).style.display != 'block') {
      document.getElementById(shIDdiv).style.display = 'block';
      txtSpan = "&#9660;";
    } else {
      document.getElementById(shIDdiv).style.display = 'none';
      txtSpan = "&#9654;";
    }
    document.getElementById(shIDspan).innerHTML = txtSpan + " ";
  }
  function showHide(shID) {
    if (shID=="soln-show-all") {
      var allAnswerCode = document.getElementsByClassName("answer-code");
      for (i = 0; i < allAnswerCode.length; i++) {
          allAnswerCode[i].style.display = 'block';
      }
    } else if (shID=="soln-hide-all") {
      var allAnswerCode = document.getElementsByClassName("answer-code");
      for (i = 0; i < allAnswerCode.length; i++) {
          allAnswerCode[i].style.display = 'none';
      }
    } else if (shID=="hints-show-all") {
      var allAnswerCode = document.getElementsByClassName("hint");
      for (i = 0; i < allAnswerCode.length; i++) {
          allAnswerCode[i].style.display = 'block';
      }
    } else if (shID=="hints-hide-all") {
      var allAnswerCode = document.getElementsByClassName("hint");
      for (i = 0; i < allAnswerCode.length; i++) {
          allAnswerCode[i].style.display = 'none';
      }
    } else {
      if (document.getElementById(shID)) {
        if (document.getElementById(shID).style.display != 'block') {
          document.getElementById(shID).style.display = 'block';
        } else {
          document.getElementById(shID).style.display = 'none';
        }
      }
    }
  }
  </script>
  <link href="lib/slidy-2/styles/slidy.css" rel="stylesheet" />
  <script src="lib/slidy-2/scripts/slidy.js"></script>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
   href="slidy_styles.css" />
  <meta name="duration" content="0" />
</head>
<body>
<div class="slide titlepage">
  <h1 class="title"><span class="pres-subtitle">Spatial Data Analysis with R</span></h1>
  <p class="author">
<span class="pres-title">Week 1: R Basics</span>
  </p>
</div>
<div id="r-as-a-calculator" class="slide section level1">
<h1>R as a calculator</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="co"># add numbers</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>pi <span class="co"># multiply by a constant</span></code></pre></div>
<pre><code>## [1] 6.283185</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">7</span> <span class="op">+</span><span class="st"> </span><span class="kw">runif</span>(<span class="dv">1</span>) <span class="co"># add a random number</span></code></pre></div>
<pre><code>## [1] 7.843468</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">3</span><span class="op">^</span><span class="dv">4</span> <span class="co"># powers</span></code></pre></div>
<pre><code>## [1] 81</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sqrt</span>(<span class="dv">4</span><span class="op">^</span><span class="dv">4</span>) <span class="co"># functions</span></code></pre></div>
<pre><code>## [1] 16</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">10</span>)</code></pre></div>
<pre><code>## [1] 2.302585</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">100</span>, <span class="dt">base =</span> <span class="dv">10</span>)</code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">23</span> <span class="op">%/%</span><span class="st"> </span><span class="dv">2</span> </code></pre></div>
<pre><code>## [1] 11</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">23</span> <span class="op">%%</span><span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># scientific notation</span>
<span class="dv">5000000000</span> <span class="op">*</span><span class="st"> </span><span class="dv">1000</span></code></pre></div>
<pre><code>## [1] 5e+12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="fl">5e9</span> <span class="op">*</span><span class="st"> </span><span class="fl">1e3</span></code></pre></div>
<pre><code>## [1] 5e+12</code></pre>
<p>Think of a mathematical operation you need - can you guess how to do it in R?</p>
</div>
<div id="assigning-values-to-r-objects" class="slide section level1">
<h1>Assigning values to R objects</h1>
<p>A key action in R is to store values in the form of R objects, and to examine the value of R objects.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">val &lt;-<span class="st"> </span><span class="dv">3</span>
val</code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(val)</code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Val &lt;-<span class="st"> </span><span class="dv">7</span> <span class="co"># case-sensitive!</span>
<span class="kw">print</span>(<span class="kw">c</span>(val, Val))</code></pre></div>
<pre><code>## [1] 3 7</code></pre>
<p>We can work with (and store) sequences and repetitions</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mySeq &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">6</span>
mySeq</code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myOtherSeq &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="fl">1.1</span>, <span class="fl">11.1</span>, <span class="dt">by =</span> <span class="dv">2</span>)
myOtherSeq</code></pre></div>
<pre><code>## [1]  1.1  3.1  5.1  7.1  9.1 11.1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(myOtherSeq)</code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fours &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">4</span>, <span class="dv">6</span>)
fours</code></pre></div>
<pre><code>## [1] 4 4 4 4 4 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## This is a comment: here is an example of non-numeric data
depts &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;espm&#39;</span>, <span class="st">&#39;pmb&#39;</span>, <span class="st">&#39;stats&#39;</span>)
depts</code></pre></div>
<pre><code>## [1] &quot;espm&quot;  &quot;pmb&quot;   &quot;stats&quot;</code></pre>
<p>If we don't assign the output of a command to an object, we haven't saved it for later use.</p>
<p>R gives us a lot of flexibility (within certain rules) for assigning to (parts of) objects from (parts of) other objects.</p>
</div>
<div id="how-to-be-lazy" class="slide section level1">
<h1>How to be <a href="http://dilbert.com/strips/comic/2005-05-29/">lazy</a></h1>
<p>If you're starting to type something you've typed before, or the long name of an R object or function, STOP! You likely don't need to type all of that.</p>
<ul>
<li>Tab completion</li>
<li>Command history
<ul>
<li>up/down arrows</li>
<li>Ctrl-{up arrow} or Command-{up arrow}</li>
</ul></li>
<li>RStudio: select a line or block for execution</li>
<li>Put your code in a file and use <code>source()</code>. For example: <code>source('myRcodeFile.R')</code></li>
</ul>
<p><strong>Question</strong>: Are there other tricks that anyone knows of?</p>
</div>
<div id="vectors-in-r" class="slide section level1">
<h1>Vectors in R</h1>
<p>The most basic form of an R object is a vector. In fact, individual (scalar) values are vectors of length one.</p>
<p>We can concatenate values into a vector with <code>c()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## numeric vector
nums &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.1</span>, <span class="dv">3</span>, <span class="op">-</span><span class="fl">5.7</span>)
devs &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">5</span>)
devs</code></pre></div>
<pre><code>## [1] -0.5056775  0.2640271 -0.1007583  1.6324775  2.0214868</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## integer vector
ints &lt;-<span class="st"> </span><span class="kw">c</span>(1L, 5L, <span class="op">-</span>3L) <span class="co"># force storage as integer not decimal number</span>
## &#39;L&#39; is for &#39;long integer&#39; (historical)

idevs &lt;-<span class="st"> </span><span class="kw">sample</span>(ints, <span class="dv">100</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)

## character vector
chars &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;hi&#39;</span>, <span class="st">&#39;hallo&#39;</span>, <span class="st">&quot;mother&#39;s&quot;</span>, <span class="st">&#39;father</span><span class="ch">\&#39;</span><span class="st">s&#39;</span>, 
   <span class="st">&quot;She said, &#39;hi&#39;&quot;</span>, <span class="st">&quot;He said, </span><span class="ch">\&quot;</span><span class="st">hi</span><span class="ch">\&quot;</span><span class="st">&quot;</span> )
chars</code></pre></div>
<pre><code>## [1] &quot;hi&quot;              &quot;hallo&quot;           &quot;mother&#39;s&quot;        &quot;father&#39;s&quot;       
## [5] &quot;She said, &#39;hi&#39;&quot;  &quot;He said, \&quot;hi\&quot;&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cat</span>(chars, <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</code></pre></div>
<pre><code>## hi
## hallo
## mother&#39;s
## father&#39;s
## She said, &#39;hi&#39;
## He said, &quot;hi&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## logical vector
bools &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)
bools</code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
</div>
<div id="working-with-indices-and-subsets" class="slide section level1">
<h1>Working with indices and subsets</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vals &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">2</span>, <span class="dv">12</span>, <span class="dt">by =</span> <span class="dv">2</span>)
vals</code></pre></div>
<pre><code>## [1]  2  4  6  8 10 12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vals[<span class="dv">3</span>]</code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vals[<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>]</code></pre></div>
<pre><code>## [1]  6  8 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vals[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">6</span>)]</code></pre></div>
<pre><code>## [1]  2  6 12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vals[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">6</span>)]</code></pre></div>
<pre><code>## [1]  4  8 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vals[<span class="kw">c</span>(<span class="kw">rep</span>(<span class="ot">TRUE</span>, <span class="dv">3</span>), <span class="kw">rep</span>(<span class="ot">FALSE</span>, <span class="dv">2</span>), <span class="ot">TRUE</span>)]</code></pre></div>
<pre><code>## [1]  2  4  6 12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">#######################################################################
## IMPORTANT: read in the airline dataset from disk;
## first make sure your working directory is the &#39;modules&#39; directory
<span class="kw">getwd</span>()</code></pre></div>
<pre><code>## [1] &quot;C:/Workshops/RSpatial/RSpatial_FourDay/rspatialdata/slides&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## if the result is not the &#39;modules&#39; subdirectory of the bootcamp
## directory, set the working directly along the lines of this:
##
## setwd(&#39;/Users/paciorek/Desktop/r-bootcamp-2017/modules&#39;)
##
## replace &#39;~/Desktop&#39; with whatever directory you put the bootcamp
## materials in; e.g./ &#39;C:\\Users\\sarah\\r-bootcamp-2017\\modules&#39;
##
air &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="kw">file.path</span>(<span class="st">&#39;../exercises/data&#39;</span>, <span class="st">&#39;airline.csv&#39;</span>), <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)
#######################################################################

## create a simple vector from the airline dataset
delay &lt;-<span class="st"> </span>air<span class="op">$</span>DepDelay
delay[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</code></pre></div>
<pre><code>##  [1]  25  -7  -2  -1  18 -11   4   0  24  -2</code></pre>
<p>We can substitute values into vectors</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vals[<span class="dv">4</span>] &lt;-<span class="st"> </span><span class="op">-</span><span class="dv">35</span>
vals[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">0</span>

vals &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>)
## How does R process these next subset operations?
vals[vals <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> </span><span class="dv">0</span>
vals[<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>]</code></pre></div>
<pre><code>## [1] 0.4848884 0.0000000 0.0000000 0.0000000 0.6402963 0.0000000 0.0000000
## [8] 0.0000000</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">crazymakers &lt;-<span class="st"> </span>delay[delay <span class="op">&gt;</span><span class="st"> </span><span class="dv">300</span>]
crazymakers[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</code></pre></div>
<pre><code>##  [1]  NA 404  NA  NA  NA  NA  NA  NA  NA  NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">crazymakers &lt;-<span class="st"> </span>crazymakers[ <span class="op">!</span><span class="kw">is.na</span>(crazymakers) ]
crazymakers[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</code></pre></div>
<pre><code>##  [1]  404  483  407  333  593 1659  348  346  443  472</code></pre>
</div>
<div id="vectorized-calculations-and-comparisons" class="slide section level1">
<h1>Vectorized calculations and comparisons</h1>
<p>At the core of R is the idea of doing calculations on entire vectors.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1 &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)
vec2 &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)
vec1</code></pre></div>
<pre><code>##  [1] 2 5 5 5 1 2 3 2 2 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec2</code></pre></div>
<pre><code>##  [1] 5 1 1 3 1 2 5 1 2 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1 <span class="op">+</span><span class="st"> </span>vec2</code></pre></div>
<pre><code>##  [1] 7 6 6 8 2 4 8 3 4 8</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1<span class="op">^</span>vec2</code></pre></div>
<pre><code>##  [1]  32   5   5 125   1   4 243   2   4 256</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1 <span class="op">&gt;=</span><span class="st"> </span>vec2</code></pre></div>
<pre><code>##  [1] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1 <span class="op">&lt;=</span><span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>##  [1]  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## using &#39;or&#39;
vec1 <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">|</span><span class="st"> </span>vec1 <span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>##  [1] FALSE  TRUE  TRUE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## using &#39;and&#39;
vec1 <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>vec1 <span class="op">&gt;=</span><span class="st"> </span>vec2</code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1 <span class="op">==</span><span class="st"> </span>vec2</code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1 <span class="op">!=</span><span class="st"> </span>vec2</code></pre></div>
<pre><code>##  [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## careful: 
vec1 =<span class="st"> </span>vec2
<span class="kw">identical</span>(vec1, vec2)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">delayChange &lt;-<span class="st"> </span>air<span class="op">$</span>DepDelay <span class="op">-</span><span class="st"> </span>air<span class="op">$</span>ArrDelay ## make up time in flight?
tmp &lt;-<span class="st"> </span>delayChange[<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>]
tmp <span class="op">&gt;=</span><span class="st"> </span><span class="dv">15</span> </code></pre></div>
<pre><code>##   [1]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE
##  [12] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE
##  [23] FALSE FALSE FALSE  TRUE FALSE    NA FALSE FALSE FALSE  TRUE FALSE
##  [34] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [45] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [56] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
##  [67] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [78] FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [89] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
## [100] FALSE</code></pre>
<p>An important related concept is that of recycling</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec3 &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">5</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)
vec4 &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">3</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)
vec1</code></pre></div>
<pre><code>##  [1] 5 1 1 3 1 2 5 1 2 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec3</code></pre></div>
<pre><code>## [1] 5 5 4 1 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec4 </code></pre></div>
<pre><code>## [1] 1 1 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1 <span class="op">+</span><span class="st"> </span>vec3</code></pre></div>
<pre><code>##  [1] 10  6  5  4  4  7 10  5  3  7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1 <span class="op">+</span><span class="st"> </span>vec4</code></pre></div>
<pre><code>## Warning in vec1 + vec4: longer object length is not a multiple of shorter
## object length</code></pre>
<pre><code>##  [1] 6 2 4 4 2 5 6 2 5 5</code></pre>
<p><strong>Question</strong>: Tell me what's going on. What choices were made by the R developers?</p>
</div>
<div id="r-is-a-functional-language" class="slide section level1">
<h1>R is a functional language</h1>
<ul>
<li>Operations are carried out with functions. Functions take objects as inputs and return objects as outputs.</li>
<li>An analysis can be considered a pipeline of function calls, with output from a function used later in a subsequent operation as input to another function.</li>
<li>Functions themselves are objects:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">median</code></pre></div>
<pre><code>## function (x, na.rm = FALSE, ...) 
## UseMethod(&quot;median&quot;)
## &lt;bytecode: 0x0000000019e8f360&gt;
## &lt;environment: namespace:stats&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(median)</code></pre></div>
<pre><code>## [1] &quot;function&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">median</span>(delay)</code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Functions generally take arguments, some of which are often optional:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">median</span>(delay, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] -1</code></pre>
<ul>
<li>We can embed function calls:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(<span class="kw">rnorm</span>(<span class="dv">1000</span>))</code></pre></div>
<p><img src="part01b_r-basics_files/figure-slidy/hist-1.png" width="768" /></p>
</div>
<div id="getting-help-about-a-function" class="slide section level1">
<h1>Getting help about a function</h1>
<p>To get information about a function you know exists, use <code>help</code> or <code>?</code>, e.g., <code>?lm</code>. For information on a general topic, use <code>apropos</code> or <code>??</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help</span>(lm)
?lm

?log

## ??&#39;regr&#39; # take out the &#39;#&#39; to demo live - there&#39;s an issue with Markdown processing...</code></pre></div>
</div>
<div id="basic-kinds-of-r-objects" class="slide section level1">
<h1>Basic kinds of R objects</h1>
<p>Vectors are not the only kinds of R objects.</p>
<h3 id="vectors">Vectors</h3>
<p>Vectors of various types (numeric (i.e., decimal/floating point/double), integer, boolean, character), all items must be of the same type</p>
<h3 id="matrices">Matrices</h3>
<p>Matrices of various types, all items must be of the same type</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">9</span>), <span class="dt">nrow =</span> <span class="dv">3</span>)
<span class="kw">t</span>(mat) <span class="op">%*%</span><span class="st"> </span>mat</code></pre></div>
<pre><code>##              [,1]        [,2]       [,3]
## [1,]  1.430049130 0.003374087 -0.2341637
## [2,]  0.003374087 1.051928773  0.7802726
## [3,] -0.234163733 0.780272634  0.6396893</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(mat)</code></pre></div>
<pre><code>## [1] 3 3</code></pre>
<h3 id="data-frames">Data frames</h3>
<p>Collections of columns of potentially different types</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(air)</code></pre></div>
<pre><code>##        X Year Month DayofMonth DayOfWeek DepTime CRSDepTime ArrTime
## 1 484123 2008     8          6         3     943        918    1130
## 2 143347 2006     2          6         1    1028       1035    1327
## 3 200908 2006     7          3         1    2028       2030    2149
## 4 309279 2007     5         20         7    1244       1245    1447
## 5 490334 2008     8         21         4    1309       1251    1503
## 6 108887 2005    11         26         6    1359       1410    1609
##   CRSArrTime UniqueCarrier FlightNum TailNum ActualElapsedTime
## 1       1121            OO      5726  N290SW               107
## 2       1405            TZ      4627  N315TZ               299
## 3       2158            US       865  N651AW                81
## 4       1431            UA       562  N531UA               123
## 5       1423            UA      1270  N925UA               114
## 6       1606            UA      1118  N379UA               130
##   CRSElapsedTime AirTime ArrDelay DepDelay Origin Dest Distance TaxiIn
## 1            123      91        9       25    SFO  RDM      462      1
## 2            330     280      -38       -7    SFO  OGG     2338      6
## 3             88      65       -9       -2    SFO  LAS      414      5
## 4            106      86       16       -1    SFO  PDX      550      7
## 5             92      74       40       18    SFO  EUG      451      5
## 6            116     114        3      -11    SFO  SEA      679      5
##   TaxiOut Cancelled CancellationCode Diverted CarrierDelay WeatherDelay
## 1      15         0                         0           NA           NA
## 2      13         0                         0            0            0
## 3      11         0                         0            0            0
## 4      30         0                         0            0            0
## 5      35         0                         0            0            0
## 6      11         0                         0            0            0
##   NASDelay SecurityDelay LateAircraftDelay
## 1       NA            NA                NA
## 2        0             0                 0
## 3        0             0                 0
## 4       16             0                 0
## 5       25             0                15
## 6        0             0                 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(air)</code></pre></div>
<pre><code>## [1] 50000    30</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(air)</code></pre></div>
<pre><code>## [1] 50000</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(air)</code></pre></div>
<pre><code>##  [1] &quot;X&quot;                 &quot;Year&quot;              &quot;Month&quot;            
##  [4] &quot;DayofMonth&quot;        &quot;DayOfWeek&quot;         &quot;DepTime&quot;          
##  [7] &quot;CRSDepTime&quot;        &quot;ArrTime&quot;           &quot;CRSArrTime&quot;       
## [10] &quot;UniqueCarrier&quot;     &quot;FlightNum&quot;         &quot;TailNum&quot;          
## [13] &quot;ActualElapsedTime&quot; &quot;CRSElapsedTime&quot;    &quot;AirTime&quot;          
## [16] &quot;ArrDelay&quot;          &quot;DepDelay&quot;          &quot;Origin&quot;           
## [19] &quot;Dest&quot;              &quot;Distance&quot;          &quot;TaxiIn&quot;           
## [22] &quot;TaxiOut&quot;           &quot;Cancelled&quot;         &quot;CancellationCode&quot; 
## [25] &quot;Diverted&quot;          &quot;CarrierDelay&quot;      &quot;WeatherDelay&quot;     
## [28] &quot;NASDelay&quot;          &quot;SecurityDelay&quot;     &quot;LateAircraftDelay&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(air)</code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.matrix</span>(air)</code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(air<span class="op">$</span>DepDelay)</code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(air<span class="op">$</span>UniqueCarrier)</code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(air<span class="op">$</span>Diverted)</code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<h3 id="lists">Lists</h3>
<p>Collections of disparate or complicated objects</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myList &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">stuff =</span> <span class="dv">3</span>, <span class="dt">mat =</span> <span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">nrow =</span> <span class="dv">2</span>), 
   <span class="dt">moreStuff =</span> <span class="kw">c</span>(<span class="st">&quot;china&quot;</span>, <span class="st">&quot;japan&quot;</span>), <span class="kw">list</span>(<span class="dv">5</span>, <span class="st">&quot;bear&quot;</span>))
myList</code></pre></div>
<pre><code>## $stuff
## [1] 3
## 
## $mat
##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
## 
## $moreStuff
## [1] &quot;china&quot; &quot;japan&quot;
## 
## [[4]]
## [[4]][[1]]
## [1] 5
## 
## [[4]][[2]]
## [1] &quot;bear&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myList[[<span class="dv">1</span>]] <span class="co"># result is not (usually) a list (unless you have nested lists)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">identical</span>(myList[[<span class="dv">1</span>]], myList<span class="op">$</span>stuff)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myList<span class="op">$</span>moreStuff[<span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] &quot;japan&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myList[[<span class="dv">4</span>]][[<span class="dv">2</span>]]</code></pre></div>
<pre><code>## [1] &quot;bear&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myList[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] <span class="co"># subset of a list is a list</span></code></pre></div>
<pre><code>## $stuff
## [1] 3
## 
## $mat
##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
## 
## $moreStuff
## [1] &quot;china&quot; &quot;japan&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myList<span class="op">$</span>newOne &lt;-<span class="st"> &#39;more weird stuff&#39;</span>
<span class="kw">names</span>(myList)</code></pre></div>
<pre><code>## [1] &quot;stuff&quot;     &quot;mat&quot;       &quot;moreStuff&quot; &quot;&quot;          &quot;newOne&quot;</code></pre>
<p>Lists can be used as vectors of complicated objects. E.g., suppose you have a linear regression for each value of a stratifying variable. You could have a list of regression fits. Each regression fit will itself be a list, so you'll have a list of lists.</p>
</div>
<div id="other-classes-of-objects" class="slide section level1">
<h1>Other classes of objects</h1>
<p>R has several approaches to object-oriented programming. These are widely used, albeit a bit klunky.</p>
<p>The most basic is 'S3' objects. These objects are generally built upon lists.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod &lt;-<span class="st"> </span><span class="kw">lm</span>(air<span class="op">$</span>DepDelay <span class="op">~</span><span class="st"> </span>air<span class="op">$</span>Distance)  <span class="co"># illustration ONLY - poorly-specified model!</span>
<span class="kw">class</span>(mod)</code></pre></div>
<pre><code>## [1] &quot;lm&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.list</span>(mod)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(mod)</code></pre></div>
<pre><code>##  [1] &quot;coefficients&quot;  &quot;residuals&quot;     &quot;effects&quot;       &quot;rank&quot;         
##  [5] &quot;fitted.values&quot; &quot;assign&quot;        &quot;qr&quot;            &quot;df.residual&quot;  
##  [9] &quot;na.action&quot;     &quot;xlevels&quot;       &quot;call&quot;          &quot;terms&quot;        
## [13] &quot;model&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod<span class="op">$</span>coefficients</code></pre></div>
<pre><code>##   (Intercept)  air$Distance 
## 11.5919999848 -0.0002999301</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod[[<span class="st">&#39;coefficients&#39;</span>]]</code></pre></div>
<pre><code>##   (Intercept)  air$Distance 
## 11.5919999848 -0.0002999301</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mod[[<span class="dv">1</span>]]</code></pre></div>
<pre><code>##   (Intercept)  air$Distance 
## 11.5919999848 -0.0002999301</code></pre>
<p>The magic of OOP here is that methods (i.e., functions) can be tailored to work specifically with specific kinds of objects.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(air<span class="op">$</span>DepDelay)</code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##  -59.00   -5.00   -1.00   11.28   10.00 1659.00     888</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(mod)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = air$DepDelay ~ air$Distance)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
##  -70.39  -15.86  -12.46   -1.40 1647.88 
## 
## Coefficients:
##                Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  11.5920000  0.2557774  45.321   &lt;2e-16 ***
## air$Distance -0.0002999  0.0001849  -1.623    0.105    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 36.58 on 49110 degrees of freedom
##   (888 observations deleted due to missingness)
## Multiple R-squared:  5.36e-05,   Adjusted R-squared:  3.324e-05 
## F-statistic: 2.633 on 1 and 49110 DF,  p-value: 0.1047</code></pre>
<p><strong>Question</strong>: What do you think R is doing behind the scenes?</p>
<p>Consider <code>summary.lm</code>.</p>
</div>
<div id="converting-between-different-types-of-objects" class="slide section level1">
<h1>Converting between different types of objects</h1>
<p>You can use the <code>as()</code> family of functions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ints &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
<span class="kw">as.character</span>(ints)</code></pre></div>
<pre><code>##  [1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;8&quot;  &quot;9&quot;  &quot;10&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.numeric</span>(<span class="kw">c</span>(<span class="st">&#39;3.7&#39;</span>, <span class="st">&#39;4.8&#39;</span>))</code></pre></div>
<pre><code>## [1] 3.7 4.8</code></pre>
<p>Be careful: R tries to be helpful and convert between types/classes when it thinks it's a good idea. Sometimes it is overly optimistic.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">indices &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.7</span>, <span class="fl">2.3</span>)
ints[indices]</code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ints[<span class="fl">0.999999999</span>]</code></pre></div>
<pre><code>## integer(0)</code></pre>
</div>
<div id="managing-your-objects" class="slide section level1">
<h1>Managing your objects</h1>
<p>R has a number of functions for getting metadata about your objects. Some of this is built in to RStudio.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec1 &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span>
vec2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)

<span class="kw">length</span>(vec1)</code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(vec1)</code></pre></div>
<pre><code>##  int [1:4] 1 2 3 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(vec1)</code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(vec1)</code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(vec2)</code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(vec2)</code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.vector</span>(vec1)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.list</span>(vec1)</code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.list</span>(myList)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.vector</span>(myList)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.data.frame</span>(air)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.list</span>(air)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p><strong>Question</strong>: What have you learned? Does it make sense?</p>
</div>
<div id="a-bit-on-plotting" class="slide section level1">
<h1>A bit on plotting</h1>
<p>R has several different plotting systems:</p>
<ul>
<li><em>base</em> graphics</li>
<li><em>lattice</em> graphics</li>
<li><em>ggplot2</em> (an add-on package)</li>
</ul>
<p>We'll see a little bit of <em>base</em> graphics here and then <em>lattice</em> and <em>ggplot2</em> tomorrow in Module 8.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(air<span class="op">$</span>DepDelay)</code></pre></div>
<p><img src="part01b_r-basics_files/figure-slidy/basic_plots-1.png" width="768" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## make a random subset for quicker plotting:
<span class="kw">set.seed</span>(<span class="dv">1</span>)  <span class="co"># make the subset reproducible</span>
subset &lt;-<span class="st"> </span>air[<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(air), <span class="dv">10000</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>), ]
## censor the outliers to limit plotting range
subset<span class="op">$</span>DepDelay[subset<span class="op">$</span>DepDelay <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span><span class="op">*</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="dv">60</span><span class="op">*</span><span class="dv">3</span>
<span class="kw">plot</span>(subset<span class="op">$</span>DepDelay <span class="op">~</span><span class="st"> </span>subset<span class="op">$</span>Distance)</code></pre></div>
<p><img src="part01b_r-basics_files/figure-slidy/basic_plots-2.png" width="768" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(subset<span class="op">$</span>DepDelay <span class="op">~</span><span class="st"> </span>subset<span class="op">$</span>DayOfWeek)</code></pre></div>
<p><img src="part01b_r-basics_files/figure-slidy/basic_plots-3.png" width="768" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(subset<span class="op">$</span>DepDelay <span class="op">~</span><span class="st"> </span>subset<span class="op">$</span>UniqueCarrier)</code></pre></div>
<p><img src="part01b_r-basics_files/figure-slidy/basic_plots-4.png" width="768" /></p>
</div>
<div id="graphics-options" class="slide section level1">
<h1>Graphics options</h1>
<p>Check out <code>help(par)</code> for various <a href="http://xkcd.com/833/">graphics settings</a>; these are set via <code>par()</code> or within the specific graphics command (some can be set in either place), e.g.,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">pch =</span> <span class="dv">2</span>)
<span class="kw">plot</span>(subset<span class="op">$</span>DepDelay <span class="op">~</span><span class="st"> </span>subset<span class="op">$</span>Distance, <span class="dt">xlab =</span> <span class="st">&#39;distance (miles)&#39;</span>, 
   <span class="dt">ylab =</span> <span class="st">&#39;delay (minutes)&#39;</span>, <span class="dt">log =</span> <span class="st">&#39;x&#39;</span>)</code></pre></div>
<p><img src="part01b_r-basics_files/figure-slidy/parstuff-1.png" width="768" /></p>
</div>
<div id="breakout" class="slide section level1">
<h1>Breakout</h1>
<p>In general, your answers to any questions should involve writing code to manipulate objects. For example, if I ask you to find the maximum flight delay, do not scan through all the values and find it by eye. Use R to do the calculations and print results.</p>
<h3 id="basics">Basics</h3>
<ol style="list-style-type: decimal">
<li><p>Create a variable called 'x' that contains the mean flight delay.</p></li>
<li><p>Use functions in R to round 'x' to two decimal places and to two significant digits.</p></li>
<li><p>Create a vector of flight distances in units of kilometers rather than miles.</p></li>
<li><p>Create a boolean (TRUE/FALSE) vector indicating whether the departure delay is shorter than the arrival delay.</p></li>
</ol>
<h3 id="using-the-ideas">Using the ideas</h3>
<ol start="5" style="list-style-type: decimal">
<li><p>Summarize the difference between the departure and arrival delays. Do flights tend to make up some of the delay time in flight?</p></li>
<li><p>Plot a histogram of the flight departure delays with negative delays set to zero, censoring delay times at a maximum of 60 minutes. Explore the effect of changing the number of bins in the histogram using the 'breaks' argument.</p></li>
<li><p>Subset the data to flights going to Chicago (ORD) and Houston (IAH). Plot delay against scheduled departure time (CRSDepTime). Add a title to the plot. Now plot so that flights to Chicago are in one color and those to Houston in another, using the 'col' argument. What are some problems with the plot?</p></li>
<li><p>Consider the following regression model. Figure out how to extract the <span class="math inline">\(R^2\)</span> and residual standard error and store in new R variables.</p></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>)
x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>)
mod &lt;-<span class="st"> </span><span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>x)
summ &lt;-<span class="st"> </span><span class="kw">summary</span>(mod)</code></pre></div>
<h3 id="advanced">Advanced</h3>
<ol start="9" style="list-style-type: decimal">
<li><p>For flights to ORD and IAH, plot departure delay against time in days where day 1 is Jan 1 2005 and the last day is Dec 31 2008. As above, use different colors for the two different destinations.</p></li>
<li><p>Now modify the size of the points. Add a legend. Rotate the numbers on the y-axis so they are printed horizontally. Recall that <code>help(par)</code> will provide a lot of information.</p></li>
</ol>
</div>

  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

</body>
</html>
